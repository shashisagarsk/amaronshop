{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/2025%20Project/amaron/app/component/header.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { ShoppingCart, LogOut, Menu, X } from 'lucide-react'; \r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n// Helper functions (no changes here)\r\nconst getUserFromToken = () => {\r\n  if (typeof window === \"undefined\") return null;\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    try {\r\n      return jwtDecode(token);\r\n    } catch (error) {\r\n      console.error(\"Invalid token:\", error);\r\n      return null;\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getCartKey = (user) => {\r\n  if (user && (user.id || user.userId)) return `cart_${user.id || user.userId}`;\r\n  if (user && user.email) return `cart_${user.email}`;\r\n  return \"cart_guest\";\r\n};\r\n\r\nexport default function Header() {\r\n  const [user, setUser] = useState(null);\r\n  const [cartCount, setCartCount] = useState(0);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false); \r\n  const router = useRouter();\r\n\r\n  const updateHeaderState = () => {\r\n    const userData = getUserFromToken();\r\n    setUser(userData);\r\n    const cartKey = getCartKey(userData);\r\n    const cart = JSON.parse(localStorage.getItem(cartKey) || '[]');\r\n    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);\r\n    setCartCount(totalItems);\r\n  };\r\n\r\n  useEffect(() => {\r\n    updateHeaderState();\r\n    window.addEventListener('storage', updateHeaderState);\r\n    return () => {\r\n      window.removeEventListener('storage', updateHeaderState);\r\n    };\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n    window.dispatchEvent(new Event(\"storage\"));\r\n    router.push(\"/login\");\r\n  };\r\n\r\n  const navLinks = [\r\n    { href: '/', label: 'Home' },\r\n    { href: '/products', label: 'Products' },\r\n    { href: '/about', label: 'About' },\r\n  ];\r\n\r\n  // A reusable component for user/cart section to avoid repetition\r\n  const UserCartSection = ({ isMobile = false }) => (\r\n    <div className={`flex items-center ${isMobile ? 'space-x-2' : 'space-x-4'}`}>\r\n      {user ? (\r\n        <div className=\"flex items-center space-x-4\">\r\n          {/* Don't show \"Welcome\" text on mobile, only logout icon */}\r\n          <span className={isMobile ? 'hidden' : 'text-gray-700 font-medium'}>\r\n            Welcome, {user.firstName || 'User'}\r\n          </span>\r\n          <button onClick={handleLogout} className=\"flex items-center text-gray-600 hover:text-blue-600 font-semibold\">\r\n            <LogOut className=\"h-5 w-5\" />\r\n            <span className={isMobile ? 'hidden' : 'ml-1'}>Logout</span>\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <Link href=\"/login\" className=\"text-gray-600 hover:text-black font-semibold\">\r\n          Login\r\n        </Link>\r\n      )}\r\n\r\n      {!isMobile && <div className=\"border-l h-6\"></div>}\r\n\r\n      <Link href=\"/cart\" className=\"relative p-2\">\r\n        <ShoppingCart className=\"h-6 w-6 text-gray-700\" />\r\n        {cartCount > 0 && (\r\n          <span className=\"absolute top-0 right-0 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full\">\r\n            {cartCount}\r\n          </span>\r\n        )}\r\n      </Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <header className=\"bg-white shadow-sm sticky top-0 z-40\">\r\n      {/* Added relative positioning to the nav for centering */}\r\n      <nav className=\"container mx-auto px-4 py-3 flex justify-between items-center relative\">\r\n        {/* Left Section: Brand Logo */}\r\n        <div className=\"flex-shrink-0\">\r\n          <Link href=\"/\" className=\"text-2xl font-bold text-blue-600\">\r\n            AmronShop\r\n          </Link>\r\n        </div>\r\n        \r\n        {/* Center Section: Main Nav Links (hidden on mobile) */}\r\n        <div className=\"hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2\">\r\n            <div className='flex items-center space-x-8'>\r\n                {navLinks.map((link) => (\r\n                    <Link key={link.href} href={link.href} className=\"text-gray-600 hover:text-blue-600 font-medium text-lg\">\r\n                        {link.label}\r\n                    </Link>\r\n                ))}\r\n            </div>\r\n        </div>\r\n\r\n        {/* Right Section: Desktop (hidden on mobile) */}\r\n        <div className=\"hidden md:flex items-center\">\r\n            <UserCartSection />\r\n        </div>\r\n\r\n        {/* Right Section: Mobile (only on mobile) */}\r\n        <div className=\"md:hidden flex items-center space-x-2\">\r\n            <UserCartSection isMobile={true} />\r\n            <button onClick={() => setIsMenuOpen(!isMenuOpen)}>\r\n                {isMenuOpen ? <X className=\"h-6 w-6\" /> : <Menu className=\"h-6 w-6\" />}\r\n            </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Mobile Menu (now only contains main links) */}\r\n      {isMenuOpen && (\r\n        <div className=\"md:hidden bg-white shadow-lg absolute top-full left-0 w-full\">\r\n          <div className=\"flex flex-col items-center space-y-6 py-6\">\r\n            {navLinks.map((link) => (\r\n                <Link key={link.href} href={link.href} className=\"text-gray-700 hover:text-blue-600 text-xl font-medium\" onClick={() => setIsMenuOpen(false)}>\r\n                    {link.label}\r\n                </Link>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}